{% extends "new_base.html" %}
{% load static %}
{% block title %}Ifemun | Payment Page {% endblock %}
{% block content %}

<section id="page-title" class="page-title-mini">

        <div class="container clearfix" style="text-align: left">
            <h1>Payment</h1>
            <br/>
            <p style="margin-bottom: 1%">
                <strong class="nobottommargin">NOTE:</strong> 
                <ol style="padding-left:5%">
                    <li>To avoid any issues on mobile, use google chrome or any other browser with javascript support.</li>
                    <li>Ensure to enter the same email address used while registering.</li>
                </ol>
            </p>
            <p>
                <i>Please do not hesitate to contact us if you have any questions at the following address: application@ifemun.org</i>
           
            </p>
            <span>Register for the conference</span>
        </div>
</section>


<section id="content">

        <div class="content-wrap">

            <div class="container clearfix">

                <div class="tabs divcenter nobottommargin clearfix" id="tab-login-register" style="max-width: 500px;">

                    <div class="tab-container">
                            <div class="card nobottommargin">
                                    <div class="card-body" id="paymentBox" style="padding: 40px;">


    <form style="max-width: 25rem;" class="nobottommargin">
        <div class="form-group">
            <label>Email address:</label>
            <input type="email" class="form-control" id="email" aria-describedby="emailHelp">
            <small id="emailHelp" class="form-text text-muted">Kindly ensure this is the same email you registered with!</small>
        </div>
        <div class="form-group">
            <label>Payment Type</label>
            <select class="form-control" id="paymentType">
                <option>Delegate</option>
                <option>Observer</option>
            </select>
        </div>
        <div class="form-group" id="packageGroup">
            <label for="exampleFormControlSelect1">Select Package</label>
            <select class="form-control" id="package">
                <option>Gamma Pack</option>
                <option>Beta Pack</option>
                <option>Alpha Pack</option>
                <option>Delta Pack</option>
            </select>
        </div>
        <div class="form-group">
            <label for="exampleFormControlSelect1">Price</label>
            <input id="price" class="form-control" type="text" placeholder="₦15,000" readonly>
        </div>
        <button type="button" class="btn btn-success mt-3" onclick="startPayment()">Pay Now</button>
    </form>
                  
                   <div id="paystackEmbedContainer"></div>

                            </div>
                            
                        </div>

                    </div>

                </div>

            </div>

        </div>

    </section><!-- #content end -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
        // set default price on load
        $("#price").val("₦15,000");

        // monitor for changes
        $("#paymentType").change(function(){
            var selectedVal = $(this).val();
            if(selectedVal == "Observer"){
                $("#packageGroup").hide();
                $("#price").val("₦3,000");
            } else if (selectedVal == "Delegate"){
                $("#packageGroup").show();
                $("#price").val("₦15,000");
                $("#package").val("Gamma Pack");
            }
        });
</script>
<script>
        $("#package").change(function(){
            var selectedVal = $(this).val();
            if(selectedVal == "Gamma Pack"){
                $("#price").val("₦15,000");
            } else if (selectedVal == "Beta Pack"){
                $("#price").val("₦10,000");
            } else if (selectedVal == "Alpha Pack"){
                $("#price").val("₦8,500");
            } else if (selectedVal == "Delta Pack"){
                $("#price").val("₦6,500");
            }   
        });
</script>

<script src="https://js.paystack.co/v1/inline.js"></script>


<script>
    function startPayment() {
        PaystackPop.setup({
        key: 'pk_test_2b26eed48af8ee06ee6103034a0678caee4dd3d2',
        email: $("#email").val(),
        amount: parseInt($("#price").val().slice(1).replace(',', '')) * 100,
        container: 'paymentBox',
        callback: function(response){
                alert('Payment Successful! Transaction ref is ' + response.reference);
            },
        });
}
</script>

{% endblock %}